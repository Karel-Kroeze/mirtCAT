Off-line run
======================================

The following code block uses `mirt` to define population parameters for ten 3PL IRT models. This
will be used to set up a CAT interface that can be used for on-line use (with the shiny GUI) or 
off-line use (for testing or Monte Carlo simulation research).

```{r}
library('mirtCAT')

## Define population parameters
a <- c(1, 1.2, 0.9, 0.8, 1.1, 1.2, 0.8, 0.7, 0.5, 1)
d <- c(-1, 1.5, 0, 0.5, -0.5, -1, 0, 0.1, 1.1, -0.2)
g <- rep(0.2, 10)
pars <- data.frame(a1 = a, d = d, g = g)
lc <- matrix(2)

## Generate mirt_object for CAT session
mirt_object <- generate.mirt_object(pars, itemtype = "3PL", latent_covariance = lc)
coef(mirt_object, simplify = TRUE)

## generate random response pattern
set.seed(1)
pattern <- generate_pattern(mirt_object, Theta = 1)
print(pattern)

result <- mirtCAT(mo = mirt_object, local_pattern = pattern, start_item = "MI", criteria = "MI")
print(result)
summary(result)
plot(result)
```

```{r}
# score the final response vector with a different estimator
responses <- summary(result, sort = FALSE)$scored_responses
fscores(mirt_object, response.pattern = responses, method = "ML")
```

This next section generates a plausible response vector given $\theta = 1$, and passes
the response vector to `mirtCAT()` for off-line use. 

```{r}
## generate random response pattern
set.seed(1)
pattern <- generate_pattern(mirt_object, Theta = 1)
print(pattern)

# use adaptive method using maximum-information item selection
result <- mirtCAT(mo=mirt_object, local_pattern=pattern, criteria='MI', start_item = 'MI')
print(result)
summary(result)
plot(result)
```
